flyStereo:
  # Global Commands
  wait_for_start_command: false
  R_imu_cam0: [0.0, 0.0, -1.57]

  vio_calibration_rvec: [0.000443016, -0.000008938, -0.000000009]
  vio_calibration_tvec: [-0.000098998, -0.00195377, -0.000001954]
  # vio_calibration_rvec: [0.0, 0.0, 0.0]
  # vio_calibration_tvec: [0.0, 0.0, 0.0]





  replay_mode:
    enable: false
    replay_dir: /tmp/run062
    replay_speed_multiplier: 1
    enable_serial_replay: false

  record_mode:
    enable: false  # Enables logging
    log_root_dir: /tmp
    outputs:
      SQL_database: false
      trajectory: true

  mavlink_reader:
    # device: /root/flyStereo/replay_data/flight/8_15_20/run005/imu.dat

  vio:

    kalman_filter:
      dt: 0.2
      sigma_a: 1.0
      f: [0.0, 1.0, 0.0, 0.0, 0.0, 0.0,
          0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
          0.0, 0.0, 0.0, 1.0, 0.0, 0.0,
          0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
          0.0, 0.0, 0.0, 0.0, 0.0, 1.0,
          0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
      h:  [1.0, 0.0, 0.0, 0.0, 0.0, 0.0,
          0.0, 0.0, 1.0, 0.0, 0.0, 0.0,
          0.0, 0.0, 0.0, 0.0, 1.0, 0.0]
      r:  [0.001, 0.0, 0.0,
          0.0, 0.001, 0.0,
          0.0, 0.0, 0.001]

  ImageSinkCam0:
    framerate: 20
    width: 1280
    height: 720
    sink_pipeline: "appsrc ! videoconvert ! queue ! xvimagesink sync=false "
    # sink_pipeline: "appsrc ! videoconvert ! tee name=t ! queue ! autovideosink t. ! queue ! videoconvert ! x264enc tune=zerolatency ! qtmux ! filesink location=/root/flyStereo/build_docker/replay/run023/cam1_annotated.mp4"
    # sink_pipeline: "appsrc ! videoconvert ! queue ! videoconvert ! x264enc tune=zerolatency ! qtmux ! filesink location=/root/flyStereo/build_docker/replay/run023/cam1_annotated.mp4"


  ImageSinkCam1:
    framerate: 20
    width: 1280
    height: 720
    sink_pipeline: "appsrc ! videoconvert ! queue ! xvimagesink sync=false "
    # sink_pipeline: "appsrc ! videoconvert ! tee name=t ! queue ! autovideosink t. ! queue ! videoconvert ! x264enc tune=zerolatency ! qtmux ! filesink location=/root/flyStereo/build_docker/replay/run023/cam1_annotated.mp4"
    # sink_pipeline: "appsrc ! videoconvert ! queue ! videoconvert ! x264enc tune=zerolatency ! qtmux ! filesink location=/root/flyStereo/build_docker/replay/run023/cam1_annotated.mp4"

  stereo_calibration:
    # kalibr calibration
    # K0:
    #   rows: 3
    #   cols: 3
    #   dt: d
    #   data: [811.8507869484671, 0, 811.0515736697479,
    #         0.00000, 657.7768180034532, 372.4887145654688,
    #         0.0, 0.0, 1.0]

    # D0:
    #   rows: 4
    #   cols: 1
    #   dt: d
    #   data: [-0.012184730764681757, -0.02412622346357368, -0.0011163758125549645, 5.938941022725496e-05]

    # K1:
    #   rows: 3
    #   cols: 3
    #   dt: d
    #   data: [813.9282740815736, 0.0, 813.2425999501481,
    #         0.00000, 638.5446353138325, 374.3345056799147,
    #         0.0, 0.0, 1.0]
    # D1:
    #   rows: 4
    #   cols: 1
    #   dt: d
    #   data: [-0.012184730764681757, -0.02412622346357368, -0.0011163758125549645, 5.938941022725496e-05]

    # R:
    #   rows: 3
    #   cols: 3
    #   dt: d
    #   data: [0.9999530691465137, -0.0016058488696015151, -0.00955409618340817, -0.07485347087831569,
    #         0.0015851846794514947, 0.9999963890481111, -0.0021700415380950786, -0.0002583373844725259,
    #         0.009557546442777417, 0.0021547946892976435, 0.9999520039311124, -5.923167211252233e-05]

    # T:
    #   rows: 3
    #   cols: 1
    #   dt: d
    #   data: [-0.07485347087831569, -0.0002583373844725259, -5.923167211252233e-05]





    # calibration from oakd factory
    K0:
       rows: 3
       cols: 3
       dt: d
       data: [798.849792, 0.000000, 643.737549,
              0.000000, 798.849792, 375.421753,
              0.000000, 0.000000, 1.000000]
    D0:
       rows: 8
       cols: 1
       dt: d
       data: [     -9.378694534301758,
                    97.73828125,
                    -0.0001613613567315042,
                    0.0009019290446303785,
                    -54.73212432861328,
                    -9.426899909973145,
                    97.14865112304688,
                    -53.132266998291016]
    K1:
       rows: 3
       cols: 3
       dt: d
       data: [798.849792, 0.000000, 643.737549,
              0.000000, 798.849792, 375.421753,
              0.000000, 0.000000, 1.000000]

    D1:
       rows: 8
       cols: 1
       dt: d
       data: [      -9.535727500915527,
                    101.45219421386719,
                    -0.0005904081626795232,
                    0.0012537626316770911,
                    -56.149658203125,
                    -9.580544471740723,
                    100.81672668457031,
                    -54.362125396728516]
    R:
       rows: 3
       cols: 3
       dt: d
       data: [0.999849, -0.001484, -0.017304,
              0.001429, 0.999994, -0.003185,
              0.017309, 0.003159, 0.999845]

    T:
       rows: 3
       cols: 1
       dt: d
       data: [-0.07485001, -0.00037700, -0.00000521]
    E:
       rows: 3
       cols: 3
       dt: d
       data: [ -6.6711931189522534e-04, -1.8881446922506674e-03,
           1.3225146160001761e-01, -2.1640485903113523e-03,
           -7.0361287805176975e-05, 1.1401013597424040e-03,
           -1.3221074499902563e-01, -3.3026595611717201e-03,
           -7.3287162022982254e-04 ]
    F:
       rows: 3
       cols: 3
       dt: d
       data: [ 3.9024333072926777e-07, 1.1048593366057523e-06,
           -5.4384653353871965e-02, 1.2654308739328487e-06,
           4.1157116390442146e-08, -1.2964087997648973e-03,
           5.3113014408008898e-02, 6.0639350746943864e-04, 1. ]
