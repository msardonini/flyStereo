flyStereo:
  # Global Commands
  wait_for_start_command: false
  R_imu_cam0: [0., 1., 0.,
               1., 0., 0.,
               0., 0.,-1.]

  vio_calibration_rvec: [0.000443016, -0.000008938, -0.000000009]
  vio_calibration_tvec: [-0.000098998, -0.00195377, -0.000001954]
  # vio_calibration_rvec: [0.0, 0.0, 0.0]
  # vio_calibration_tvec: [0.0, 0.0, 0.0]





  replay_mode:
    enable: false
    replay_dir: /tmp/run062
    replay_speed_multiplier: 1
    enable_serial_replay: false

  record_mode:
    enable: false  # Enables logging
    log_root_dir: /tmp
    outputs:
      SQL_database: false
      trajectory: true

  mavlink_reader:
    # device: /root/flyStereo/replay_data/flight/8_15_20/run005/imu.dat

  vio:

    kalman_filter:
      dt: 0.2
      sigma_a: 1.0
      f: [0.0, 1.0, 0.0, 0.0, 0.0, 0.0,
          0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
          0.0, 0.0, 0.0, 1.0, 0.0, 0.0,
          0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
          0.0, 0.0, 0.0, 0.0, 0.0, 1.0,
          0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
      h:  [1.0, 0.0, 0.0, 0.0, 0.0, 0.0,
          0.0, 0.0, 1.0, 0.0, 0.0, 0.0,
          0.0, 0.0, 0.0, 0.0, 1.0, 0.0]
      r:  [0.001, 0.0, 0.0,
          0.0, 0.001, 0.0,
          0.0, 0.0, 0.001]

  ImageSinkCam0:
    framerate: 20
    width: 1280
    height: 720
    sink_pipeline: "appsrc ! videoconvert ! queue ! xvimagesink sync=false "
    # sink_pipeline: "appsrc ! videoconvert ! tee name=t ! queue ! autovideosink t. ! queue ! videoconvert ! x264enc tune=zerolatency ! qtmux ! filesink location=/root/flyStereo/build_docker/replay/run023/cam1_annotated.mp4"
    # sink_pipeline: "appsrc ! videoconvert ! queue ! videoconvert ! x264enc tune=zerolatency ! qtmux ! filesink location=/root/flyStereo/build_docker/replay/run023/cam1_annotated.mp4"


  ImageSinkCam1:
    framerate: 20
    width: 1280
    height: 720
    sink_pipeline: "appsrc ! videoconvert ! queue ! xvimagesink sync=false "
    # sink_pipeline: "appsrc ! videoconvert ! tee name=t ! queue ! autovideosink t. ! queue ! videoconvert ! x264enc tune=zerolatency ! qtmux ! filesink location=/root/flyStereo/build_docker/replay/run023/cam1_annotated.mp4"
    # sink_pipeline: "appsrc ! videoconvert ! queue ! videoconvert ! x264enc tune=zerolatency ! qtmux ! filesink location=/root/flyStereo/build_docker/replay/run023/cam1_annotated.mp4"

  stereo_calibration:

    # At home calibration
    K0:
      rows: 3
      cols: 3
      dt: d
      data: [ 7.9976243804000217e+02, 0., 6.5946103385465130e+02, 0.,
          7.9880514421151747e+02, 3.7195606763238146e+02, 0., 0., 1. ]
    D0:
      rows: 8
      cols: 1
      dt: d
      data: [ -1.0411711306670753e+01, 7.1141195133589775e+01,
          -8.7499810856016649e-04, -1.8929117499371251e-04,
          -7.9779283737544844e+01, -1.0463713237618228e+01,
          7.1212779508133593e+01, -7.9625662782413499e+01 ]
    K1:
      rows: 3
      cols: 3
      dt: d
      data: [ 8.0263250768078478e+02, 0., 6.4012734467880682e+02, 0.,
          8.0185411248501339e+02, 3.7665317579356696e+02, 0., 0., 1. ]
    D1:
      rows: 8
      cols: 1
      dt: d
      data: [ -1.1227843821451337e+01, 8.7248829631818552e+01,
          -1.1776659947189787e-03, 2.3356876696506619e-04,
          -8.2874390411029552e+01, -1.1272778993721520e+01,
          8.7126228865955923e+01, -8.2245604618472882e+01 ]
    R:
      rows: 3
      cols: 3
      dt: d
      data: [ 9.9995301550309879e-01, -1.6791640199245335e-03,
          -9.5471039825548703e-03, 1.6293682740798553e-03,
          9.9998504208780570e-01, -5.2211837428818679e-03,
          9.5557284016942554e-03, 5.2053826798519592e-03,
          9.9994079427027549e-01 ]
    T:
      rows: 3
      cols: 1
      dt: d
      data: [ -7.4243723717845975e-02, -4.8323952051172942e-04,
          3.1936897034628253e-03 ]
    E:
      rows: 3
      cols: 3
      dt: d
      data: [ -9.8214022910528748e-06, -3.1961573791629565e-03,
          -4.6653606920375647e-04, 3.9029925089370116e-03,
          3.8110426468773132e-04, 7.4208837576318826e-02,
          3.6224644777056709e-04, -7.4243424625161480e-02,
          3.8302658533582491e-04 ]
    F:
      rows: 3
      cols: 3
      dt: d
      data: [ -2.6800857005015206e-08, -8.7321962395502043e-06,
          2.2474948852715367e-03, 1.0660910153174494e-05,
          1.0422226909345381e-06, 1.5469315008449391e-01,
          -3.2049026423779073e-03, -1.5760871392546752e-01, 1. ]



    # calibration from oakd factory
    # K0:
    #    rows: 3
    #    cols: 3
    #    dt: d
    #    data: [798.849792, 0.000000, 643.737549,
    #           0.000000, 798.849792, 375.421753,
    #           0.000000, 0.000000, 1.000000]
    # D0:
    #    rows: 8
    #    cols: 1
    #    dt: d
    #    data: [     -9.378694534301758,
    #                 97.73828125,
    #                 -0.0001613613567315042,
    #                 0.0009019290446303785,
    #                 -54.73212432861328,
    #                 -9.426899909973145,
    #                 97.14865112304688,
    #                 -53.132266998291016]
    # K1:
    #    rows: 3
    #    cols: 3
    #    dt: d
    #    data: [798.849792, 0.000000, 643.737549,
    #           0.000000, 798.849792, 375.421753,
    #           0.000000, 0.000000, 1.000000]

    # D1:
    #    rows: 8
    #    cols: 1
    #    dt: d
    #    data: [      -9.535727500915527,
    #                 101.45219421386719,
    #                 -0.0005904081626795232,
    #                 0.0012537626316770911,
    #                 -56.149658203125,
    #                 -9.580544471740723,
    #                 100.81672668457031,
    #                 -54.362125396728516]
    # R:
    #    rows: 3
    #    cols: 3
    #    dt: d
    #    data: [0.999849, -0.001484, -0.017304,
    #           0.001429, 0.999994, -0.003185,
    #           0.017309, 0.003159, 0.999845]

    # T:
    #    rows: 3
    #    cols: 1
    #    dt: d
    #    data: [-0.07485001, -0.00037700, -0.00000521]
    # E:
    #    rows: 3
    #    cols: 3
    #    dt: d
    #    data: [ -6.6711931189522534e-04, -1.8881446922506674e-03,
    #        1.3225146160001761e-01, -2.1640485903113523e-03,
    #        -7.0361287805176975e-05, 1.1401013597424040e-03,
    #        -1.3221074499902563e-01, -3.3026595611717201e-03,
    #        -7.3287162022982254e-04 ]
    # F:
    #    rows: 3
    #    cols: 3
    #    dt: d
    #    data: [ 3.9024333072926777e-07, 1.1048593366057523e-06,
    #        -5.4384653353871965e-02, 1.2654308739328487e-06,
    #        4.1157116390442146e-08, -1.2964087997648973e-03,
    #        5.3113014408008898e-02, 6.0639350746943864e-04, 1. ]
